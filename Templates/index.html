{% extends 'main_base.html' %}

{% block title %}Home - Travello{% endblock %}

{% block content %}

<!-- ========== BANNER ========== -->
<div class="destination_banner_wrap overlay">
    <div class="destination_text text-center">
        <h3>Welcome to Travello</h3>
        <h3>Explore Nepalâ€™s Most Beautiful Cities</h3>
    </div>
</div>

<!-- ========== CITY LISTING ========== -->
<h3 class="text-center mb-4 mt-5">Explore Cities</h3>
<div class="container py-5">
    <div class="row">
        {% for city in cities %}
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="single_destination text-center">
                    {% if city.image %}
                        <div class="thumb mb-3">
                            <img src="{{ city.image.url }}" alt="{{ city.name }}" class="img-fluid rounded">
                        </div>
                    {% endif %}
                    <h4>{{ city.name }}</h4>
                    <a href="{% url 'destination_list' city=city.name %}" class="boxed-btn4 mt-2">Explore {{ city.name }}</a>
                </div>
            </div>
        {% endfor %}
    </div>

    <!-- ========== DESTINATIONS LISTING ========== -->
    <h3 class="text-center mb-4 mt-5">Explore Places</h3>
    <div class="row">
        {% for dest in dests %}
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="single_destination text-center">
                    <div class="thumb mb-3">
                        <img src="{{ dest.img1.url }}" alt="{{ dest.name }}" class="img-fluid rounded">
                    </div>
                    <h4>{{ dest.name }}</h4>
                    <a href="{% url 'destination_details' destination_name=dest.name %}" class="boxed-btn4 mt-2">Explore {{ dest.name }}</a>
                </div>
            </div>
        {% endfor %}
    </div>

    <!-- ========== RECOMMENDATION FORM ========== -->
    <h3 class="text-center mb-4 mt-5">Recommended For You</h3>
    <div class="where_togo_area my-5">
        <div class="row align-items-center">
            <div class="col-lg-3">
                <div class="form_area">
                    <h3>Where you want to go?</h3>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="search_wrap">
                    <form action="{% url 'recommendations' %}" method="post">
                        {% csrf_token %}
                        <label for="preference">Enter your preference (e.g., Adventure, Scenic):</label>
                        <input type="text" id="preference" name="preference" class="form-control" placeholder="Type your preference here">
                        <button type="submit" class="boxed-btn4 mt-2">Get Recommendations</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Newsletter -->
<div class="newletter_area overlay">
    <div class="container">
        <div class="row justify-content-center align-items-center">
            <div class="col-lg-10">
                <div class="row align-items-center">
                    <div class="col-lg-5">
                        <div class="newsletter_text">
                            <h4>Subscribe Our Newsletter</h4>
                            <p>Subscribe newsletter to get offers and about new places to discover.</p>
                        </div>
                    </div>
                    <div class="col-lg-7">
                        <form action="{% url 'subscribe_newsletter' %}" method="POST">
                            {% csrf_token %}
                            <div class="mail_form">
                                <div class="row no-gutters">
                                    <div class="col-lg-9 col-md-8">
                                        <div class="newsletter_field">
                                            <input type="email" name="email" placeholder="Your mail" required>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-4">
                                        <div class="newsletter_btn">
                                            <button class="boxed-btn4" type="submit">Subscribe</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        {% if messages %}
                            <div style="margin-top: 10px;">
                                {% for message in messages %}
                                    <div>{{ message }}</div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
